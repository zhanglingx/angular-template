!function($){function t(t,n,i,r){return Math.abs(t-n)>=Math.abs(i-r)?t-n>0?"Left":"Right":i-r>0?"Up":"Down"}function n(){f=null,w.last&&(w.el.trigger("longTap"),w={})}function i(){f&&clearTimeout(f),f=null}function r(){l&&clearTimeout(l),g&&clearTimeout(g),T&&clearTimeout(T),f&&clearTimeout(f),l=g=T=f=null,w={}}function a(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function u(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var l,g,T,f,h,w={},y=750;$(document).ready(function(){var d,m,v,M,b=0,x=0;"MSGesture"in window&&(h=new MSGesture,h.target=document.body),$(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(w.el.trigger("swipe"),w.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(!(M=u(e,"down"))||a(e))&&(v=M?e:e.touches[0],e.touches&&1===e.touches.length&&w.x2&&(w.x2=void 0,w.y2=void 0),d=Date.now(),m=d-(w.last||d),w.el=$("tagName"in v.target?v.target:v.target.parentNode),l&&clearTimeout(l),w.x1=v.pageX,w.y1=v.pageY,m>0&&250>=m&&(w.isDoubleTap=!0),w.last=d,f=setTimeout(n,y),h&&M&&h.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(M=u(e,"move"))||a(e))&&(v=M?e:e.touches[0],i(),w.x2=v.pageX,w.y2=v.pageY,b+=Math.abs(w.x1-w.x2),x+=Math.abs(w.y1-w.y2))}).on("touchend MSPointerUp pointerup",function(e){(!(M=u(e,"up"))||a(e))&&(i(),w.x2&&Math.abs(w.x1-w.x2)>30||w.y2&&Math.abs(w.y1-w.y2)>30?T=setTimeout(function(){w.el.trigger("swipe"),w.el.trigger("swipe"+t(w.x1,w.x2,w.y1,w.y2)),w={}},0):"last"in w&&(30>b&&30>x?g=setTimeout(function(){var t=$.Event("tap");t.cancelTouch=r,w.el.trigger(t),w.isDoubleTap?(w.el&&w.el.trigger("doubleTap"),w={}):l=setTimeout(function(){l=null,w.el&&w.el.trigger("singleTap"),w={}},250)},0):w={}),b=x=0)}).on("touchcancel MSPointerCancel pointercancel",r),$(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){$.fn[t]=function(n){return this.on(t,n)}})}(Zepto);